# 동기 & 비동기

자바스크립트를 공부할 때 제일 중요한 개념 중 하나라고 생각한다.

동기와 비동기에 관해 공부하며  어려움도 굉장히 많았고 이러한 개념을 확실하게 짚고 넘어가지 않으면 다음 레벨로 넘어가도 이해가 잘 안되고 개발자에 대한 성장도 더딜것이라고 생각한다.

## JavaScript 는 동기식 언어 (싱글 쓰레드)

즉 한번에 하나의 작업을 수행한다.

한 작업이 수행되는 동안 다른 작업은 멈춘 상태로 자신의 차례를 기다린다.

매표소 와 키오스크로 생각하니 이해하기가 아주 편했다.

```jsx
console.log("김");
console.log("지");
console.log("후");

// Result
김
지
후
```

위의 코드의 결과는 작성한 순서대로 결과를 출력한다.

그러한 이유는 자바스크립트 엔진 때문이라고 할수있다.

자바스크립트는 V8 이라는 브라우저 엔진을 제공한다.

V8엔진은 크롬 브라우저와 안드로이드 브라우저에 탑재되어있다.

자세한 V8엔진에 대한 공부는 나중에 문서로 정리해보겠다.

## 싱글 쓰레드 작업 수행 방식

1. 코드가 작성된 순서대로 작업을 처리
2. 이전 작업이 진행중 일 때 다음 작업을 수행하지 않고 기다림

## 자바스크립트 엔진 (V8)

동기와 비동기 방식을 이해하려면 자바스크립트 엔진(V8)을 까보면 알 수 있다.

아직까지 엔진 , 라이브러리를 까보면 공부가 된다는 말이 있지만 

까본다는게 무슨 의미인지 아직까지는 잘 모르겠다…

그래도 문서를 보며 동기와 비동기의 필요한 부분 먼저 공부를 해보았다

### Memory Heap

컴퓨터는 CPU를 사용해 연산하고 메모리를 사용해 데이터를 기억한다.

**Memory Heap 은 메모리를 저장하는 곳** 이라고 생각하면 된다.

- 변수와 객체의 메모리 할당을 담당하는 곳
- 각 셀은 고유한 메모리 주소를 가진다.
- 메모리에 저장되는 값은 2진수로 처리된다.

### Call Stack

**함수가 호출되면 이 곳에 쌓이게 된다.**

LIFO (Last In First Out) 방식으로 실행된다 즉 쌓이는 순서 반대로 실행된다.

![https://manbalboy.github.io/assets/img/blog/javascript/2021/04/03.PNG](https://manbalboy.github.io/assets/img/blog/javascript/2021/04/03.PNG)

진짜 이해가 안간다면 내가 제일 좋아하는 과자 프링글스를 생각하면 된다.

프링글스는 밑에가 막혀있고 고객들은 프링글스의 뚜껑을 열고 맨위에 있는 과자부터 먹기 시작한다. 맨위에 있는 과자는 어떻게 보면 제일 마지막에 들어갔다고 할 수 있다.

마지막에 들어가서 제일 먼저 고객의 입으로 전달되는 구조! 이것이 LIFO 이다.

## 그렇다면 비동기는 무엇인가?

어떠한 요청을 보내면 그 요청이 끝날때 까지 기다리는게 아니라 응답에 관계없이 바로  다음 동작이 실행 되는것을 비동기라고 한다.

### 비동기가 왜 필요할까?

웹이나 앱은 개발자가 만족하는게 아니라 사용자가 만족해야한다고 생각한다.

그래서 항상 안전하고 빨라야 사랑받을수있다.

웹 페이지가 로딩되고 어떠한 동작을 하는데 시간을 많이 소모한다고 생각하면

어떠한 동작이 끝나기 전까지 다음 동작을 수행하지 못한다.

그렇기 때문에 자바스크립트가 웹 사이트에서 동작 할 때, 비 동기적으로 수행할 수 있어야 한다.

### API는 왜 항상 비동기로 호출 하는가?

비동기와 동기의 개념도 잘 짚고 넘어가지도 못했으면서 API를 사용한 나를보며 반성을 많이 했다.

API 는 수 많은 데이터를 가지고 있다.

그러한 데이터를 받으려면 자바스크립트의 원리로는 받기 전 까지 다음 작업을 수행하지 못한다.

그렇게 되면 로딩 속도도 많이 지연될거고 버튼 하나를 누르면 많이 기다려야되는 속이 터지는 상황이 생긴다. 

서버의 환경 즉 사용자들의 로컬 환경에 따라서 서버로 부터 데이터를 전송받는 속도가 다르다.

즉 좋지않은 환경인 사용자들은 데이터를 전송받는 속도가 엄청 느릴수도 있다.

다음 작업을 수행하지 못하고 눈에 보이지도 않는 데이터를 받을때까지 사용자들은 재미도없이 기다리기만 한다. 그래서 다음작업을 수행하지 못하니 굉장히 비효율적이다.

그래서 일단 요청을 먼저 보내놓을테니 다른거 먼저 해! 이것이다.

## 느낀 점

항상 내가 왜 이걸 사용하는지. 왜 A 보다 B를 선택했는지의 확실한 이유가 있어야하며

그 이유를 타인에게 설명 할 수 있어야 한다고 생각한다.

동기와 비동기를 이해해야 다음 단계인 Promise , async , await 을 밟을 수 있으니 확실하게 이해하고 짚고 넘어가야겠다.

# 참고자료

---

[자바스크립트 - 동기(Synchronous)? 비동기(asynchronous)?](https://ljtaek2.tistory.com/142)

[[javascript] 자바스크립트 엔진 안에 Memory Heap 과 Call Stack](https://espania.tistory.com/337)